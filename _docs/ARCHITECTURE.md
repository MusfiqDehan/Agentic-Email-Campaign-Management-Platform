````markdown
# ğŸ—ï¸ Architecture Overview

## System Architecture by Environment

### Local Development Environment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Host Machine                            â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚          Docker Network (Bridge)                   â”‚    â”‚
â”‚  â”‚                                                    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚   Web Container      â”‚  â”‚  DB Container    â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                      â”‚  â”‚                  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Django Dev Server   â”‚  â”‚  PostgreSQL 16   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Port: 8000         â”‚â”€â”€â”‚  Port: 5432      â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                      â”‚  â”‚                  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - Hot reload        â”‚  â”‚  - Health checks â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - Debug mode        â”‚  â”‚  - Data volume   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - Console email     â”‚  â”‚                  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - Code volume       â”‚  â”‚                  â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  Access: http://localhost:8000                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Development Server Environment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Development Server                        â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚          Docker Network (Bridge)                   â”‚    â”‚
â”‚  â”‚                                                    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚   Web Container      â”‚  â”‚  DB Container    â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                      â”‚  â”‚                  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Gunicorn (2 workers)â”‚  â”‚  PostgreSQL 16   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Port: 8000         â”‚â”€â”€â”‚  Port: 5432      â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                      â”‚  â”‚                  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - Auto-reload      â”‚  â”‚  - Data volume   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - File logging     â”‚  â”‚  - Backup volume â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - Static files     â”‚  â”‚                  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - Media files      â”‚  â”‚                  â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  Access: http://<dev-server>:8000                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Production Environment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Production Server                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Docker Network (email_campaign_network)         â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚   â”‚
â”‚  â”‚  â”‚     Nginx      â”‚  Reverse Proxy & Static Files       â”‚   â”‚
â”‚  â”‚  â”‚  Port: 80/443  â”‚                                     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚   â”‚
â”‚  â”‚           â”‚                                              â”‚   â”‚
â”‚  â”‚           â–¼                                              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚   â”‚
â”‚  â”‚  â”‚  Web Container â”‚  Django + Gunicorn                  â”‚   â”‚
â”‚  â”‚  â”‚  Port: 8000    â”‚  (4 workers, 2 threads)            â”‚   â”‚
â”‚  â”‚  â”‚                â”‚                                     â”‚   â”‚
â”‚  â”‚  â”‚  - Non-root    â”‚                                     â”‚   â”‚
â”‚  â”‚  â”‚  - Optimized   â”‚                                     â”‚   â”‚
â”‚  â”‚  â”‚  - Logging     â”‚                                     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚   â”‚
â”‚  â”‚           â”‚                                              â”‚   â”‚
â”‚  â”‚      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                        â”‚   â”‚
â”‚  â”‚      â–¼         â–¼                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”                                    â”‚   â”‚
â”‚  â”‚  â”‚ DB   â”‚  â”‚Redis â”‚                                    â”‚   â”‚
â”‚  â”‚  â”‚ 5432 â”‚  â”‚ 6379 â”‚                                    â”‚   â”‚
â”‚  â”‚  â”‚      â”‚  â”‚      â”‚                                    â”‚   â”‚
â”‚  â”‚  â”‚ PSQL â”‚  â”‚Cache â”‚                                    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜                                    â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  Access: https://yourdomain.com                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

### Request Flow (Production)

```
Internet
   â”‚
   â–¼
Nginx (Port 80/443)
   â”‚
   â”œâ”€â”€â”€â”€â”€â–º Static Files (/static/) â”€â”€â”€â”€â”€â”€â–º Serve directly
   â”‚
   â”œâ”€â”€â”€â”€â”€â–º Media Files (/media/) â”€â”€â”€â”€â”€â”€â”€â”€â–º Serve directly
   â”‚
   â””â”€â”€â”€â”€â”€â–º API/App Requests (/*)
              â”‚
              â–¼
          Gunicorn Workers (Port 8000)
              â”‚
              â–¼
          Django Application
              â”‚
              â”œâ”€â”€â”€â”€â”€â–º PostgreSQL (Data)
              â”‚
              â””â”€â”€â”€â”€â”€â–º Redis (Cache)
```

### Development Flow (Local)

```
Developer
   â”‚
   â–¼
Django Dev Server (Port 8000)
   â”‚
   â”œâ”€â”€â”€â”€â”€â–º Hot Reload (Code changes)
   â”‚
   â”œâ”€â”€â”€â”€â”€â–º Console Output (Emails, Logs)
   â”‚
   â””â”€â”€â”€â”€â”€â–º PostgreSQL (Port 5432)
```

## Volume Management

### Local Environment
```
Volumes:
â”œâ”€â”€ postgres_data_local    â†’ /var/lib/postgresql/data
â””â”€â”€ . (source code)        â†’ /app (mounted)
```

### Development Environment
```
Volumes:
â”œâ”€â”€ postgres_data_dev      â†’ /var/lib/postgresql/data
â”œâ”€â”€ static_volume          â†’ /app/staticfiles
â”œâ”€â”€ media_volume           â†’ /app/media
â”œâ”€â”€ . (source code)        â†’ /app (mounted)
â””â”€â”€ ../logs                â†’ /app/logs
```

### Production Environment
```
Volumes:
â”œâ”€â”€ postgres_data_prod     â†’ /var/lib/postgresql/data
â”œâ”€â”€ redis_data_prod        â†’ /data
â”œâ”€â”€ static_volume          â†’ /app/staticfiles (shared with nginx)
â”œâ”€â”€ media_volume           â†’ /app/media (shared with nginx)
â”œâ”€â”€ ../logs                â†’ /app/logs
â””â”€â”€ ../nginx/ssl           â†’ /etc/nginx/ssl
```

## Network Architecture

### Local/Dev (Bridge Network)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Bridge Network (default)   â”‚
â”‚                              â”‚
â”‚  web â†â†’ db                  â”‚
â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Production (Custom Network)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  email_campaign_network (bridge)   â”‚
â”‚                                    â”‚
â”‚  nginx â†â†’ web â†â†’ db               â”‚
â”‚            â†“                       â”‚
â”‚          redis                     â”‚
â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Environment Configuration Flow

```
../.env.[environment]
       â”‚
       â–¼
Docker Compose File
       â”‚
       â–¼
Container Environment Variables
       â”‚
       â–¼
../config/settings/__init__.py
       â”‚
       â”œâ”€â”€â”€â”€ DJANGO_ENV=local â”€â”€â”€â”€â–º ../config/settings/local.py
       â”‚
       â”œâ”€â”€â”€â”€ DJANGO_ENV=development â”€â”€â–º ../config/settings/dev.py
       â”‚
       â””â”€â”€â”€â”€ DJANGO_ENV=production â”€â”€â–º ../config/settings/prod.py
                                            â”‚
                                            â–¼
                                    Django Application
```

## File Structure Map

```
Project Root
â”‚
â”œâ”€â”€ Docker Configuration
â”‚   â”œâ”€â”€ ../Dockerfile (multi-stage)
â”‚   â”œâ”€â”€ ../.dockerignore
â”‚   â”œâ”€â”€ ../docker-compose.local.yml
â”‚   â”œâ”€â”€ ../docker-compose.dev.yml
â”‚   â””â”€â”€ ../docker-compose.prod.yml
â”‚
â”œâ”€â”€ Environment Files
â”‚   â”œâ”€â”€ ../.env.example
â”‚   â”œâ”€â”€ ../.env.local
â”‚   â”œâ”€â”€ ../.env.dev
â”‚   â””â”€â”€ ../.env.prod
â”‚
â”œâ”€â”€ Django Settings
â”‚   â””â”€â”€ ../config/settings/
â”‚       â”œâ”€â”€ __init__.py (loader)
â”‚       â”œâ”€â”€ base.py (common)
â”‚       â”œâ”€â”€ local.py (local dev)
â”‚       â”œâ”€â”€ dev.py (dev server)
â”‚       â””â”€â”€ prod.py (production)
â”‚
â”œâ”€â”€ Nginx Configuration (Production)
â”‚   â””â”€â”€ ../nginx/
â”‚       â”œâ”€â”€ nginx.conf
â”‚       â””â”€â”€ conf.d/
â”‚           â””â”€â”€ default.conf
â”‚
â”œâ”€â”€ Management Tools
â”‚   â””â”€â”€ ../docker-manage.sh
â”‚
â””â”€â”€ Documentation
    â”œâ”€â”€ ../README.md
    â”œâ”€â”€ QUICKSTART.md
    â”œâ”€â”€ DOCKER_SETUP.md
    â”œâ”€â”€ DOCKER_README.md
    â”œâ”€â”€ SUMMARY.md
    â””â”€â”€ ARCHITECTURE.md (this file)
```

## Security Layers (Production)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SSL/TLS (Nginx)                   â”‚  â† HTTPS encryption
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Security Headers (Nginx)          â”‚  â† XSS, CSP, etc.
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Django Security Middleware        â”‚  â† CSRF, Session, etc.
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  JWT Authentication                â”‚  â† API authentication
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Django Permissions                â”‚  â† Authorization
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Network Isolation (Docker)        â”‚  â† Container network
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Non-root User (Container)         â”‚  â† Privilege reduction
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Workflow

```
Development
    â”‚
    â”œâ”€â”€ Code Changes
    â”‚      â”‚
    â”‚      â–¼
    â”‚   Local Testing (../docker-compose.local.yml)
    â”‚      â”‚
    â”‚      â–¼
    â”‚   Git Commit
    â”‚
    â–¼
Development Server
    â”‚
    â”œâ”€â”€ Pull Changes
    â”‚      â”‚
    â”‚      â–¼
    â”‚   Build & Deploy (../docker-compose.dev.yml)
    â”‚      â”‚
    â”‚      â–¼
    â”‚   Testing & QA
    â”‚
    â–¼
Production
    â”‚
    â”œâ”€â”€ Pull Changes
    â”‚      â”‚
    â”‚      â–¼
    â”‚   Backup Database
    â”‚      â”‚
    â”‚      â–¼
    â”‚   Build & Deploy (../docker-compose.prod.yml)
    â”‚      â”‚
    â”‚      â–¼
    â”‚   Smoke Testing
    â”‚
    â–¼
  Live
```

## Scaling Considerations

### Horizontal Scaling (Future)
```
                    Load Balancer
                          â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼             â–¼             â–¼
         Web 1         Web 2         Web 3
            â”‚             â”‚             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                    â–¼           â–¼
              PostgreSQL      Redis
             (Primary)       (Shared)
```

Current setup supports scaling by:
1. Adding more Gunicorn workers
2. Running multiple web containers behind load balancer
3. Shared PostgreSQL and Redis instances

---

This architecture provides:
- âœ… Environment isolation
- âœ… Development flexibility
- âœ… Production security
- âœ… Scalability path
- âœ… Easy maintenance

````